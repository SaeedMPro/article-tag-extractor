syntax = "proto3";

package article;

option go_package = "github.com/SaeedMPro/article-tag-extractor/proto;article";

// --- gRPC service definition
service ArticleService {
  rpc ProcessArticles(ProcessArticlesRequest) returns (ProcessArticlesResponse);
  rpc GetTopTags(GetTopTagsRequest) returns (GetTopTagsResponse);
}

// --- request and response
message ProcessArticlesRequest {
  repeated Article articles = 1;
}

message ProcessArticlesResponse {
  repeated ProcessedArticle processed_articles = 1;
  int32 total_processed = 2;
}

message GetTopTagsRequest {
  int32 limit = 1;
}

message GetTopTagsResponse {
  repeated TagFrequency tags = 1;
}

// --- data models
message Article {
  string title = 1;
  string body = 2;
}

message ProcessedArticle {
  string id = 1;
  string title = 2;
  string body = 3;
  repeated string tags = 4;
  string created_at = 5;
}

message TagFrequency {
  string tag = 1;
  int64 frequency = 2;
}
